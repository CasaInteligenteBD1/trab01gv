/* modLogico_3: */

CREATE TABLE PESSOA_JURIDICA (
    cnpj varchar(18),
    FK_PESSOA_id int PRIMARY KEY
);

CREATE TABLE ENDERECO (
    complemento varchar(50),
    cep varchar(9),
    logradouro varchar(100),
    id int PRIMARY KEY,
    FK_BAIRRO_id int
);

CREATE TABLE FUNCIONARIO (
    matricula varchar(20),
    dataAdmissao date,
    dataDemissao date,
    FK_PESSOA_FISICA_FK_PESSOA_id int PRIMARY KEY,
    FK_PESSOA_JURIDICA_FK_PESSOA_id int,
    FK_CARGO_id int
);

CREATE TABLE BAIRRO (
    id int PRIMARY KEY,
    nome varchar(100),
    FK_CIDADE_id int
);

CREATE TABLE ESTACIONAMENTO (
    qntVagas int,
    valorHora money,
    nome varchar(100),
    latitude varchar(15),
    longitude varchar(15),
    id int PRIMARY KEY,
    FK_PESSOA_JURIDICA_FK_PESSOA_id int,
    FK_ENDERECO_id int
);

CREATE TABLE CARGO (
    id int PRIMARY KEY,
    nome varchar(100)
);

CREATE TABLE CIDADE (
    nome varchar(100),
    id int PRIMARY KEY,
    FK_ESTADO_id int
);

CREATE TABLE PESSOA_FISICA (
    cpf varchar(14),
    FK_PESSOA_id int PRIMARY KEY
);

CREATE TABLE PAGAMENTO_ESTACIONAMENTO (
    data date,
    valor money,
    id int PRIMARY KEY,
    FK_MOTORISTA_FK_PESSOA_FISICA_FK_PESSOA_id int,
    FK_VAGA_id int
);

CREATE TABLE PESSOA (
    telefone1 varchar(15),
    id int PRIMARY KEY,
    email varchar(100),
    telefone2 varchar(15),
    senha varchar(25),
    nome varchar(100)
);

CREATE TABLE VAGA (
    status varchar(7),
    longitude varchar(15),
    numero int,
    latitude varchar(15),
    andar int,
    id int PRIMARY KEY,
    FK_ESTACIONAMENTO_id int
);

CREATE TABLE ESTADO (
    nome varchar(18),
    id int PRIMARY KEY
);

CREATE TABLE MOTORISTA (
    creditos money,
    cnh varchar(11),
    FK_PESSOA_FISICA_FK_PESSOA_id int PRIMARY KEY
);

CREATE TABLE RESERVA (
    horaReserva time,
    dataReserva date,
    horaSaida time,
    id int PRIMARY KEY,
    FK_VAGA_id int,
    FK_MOTORISTA_FK_PESSOA_FISICA_FK_PESSOA_id int
);

CREATE TABLE RECARGA (
    id int PRIMARY KEY,
    valor money,
    FK_MOTORISTA_FK_PESSOA_FISICA_FK_PESSOA_id int,
    FK_FORMA_PAGAMENTO_id int
);

CREATE TABLE VEICULO (
    modelo varchar(30),
    ano int,
    placa varchar(8) PRIMARY KEY,
    nome varchar(50),
    marca varchar(50)
);

CREATE TABLE CARTAO (
    bandeira varchar(50),
    numero varchar(30),
    numParcelas int,
    FK_FORMA_PAGAMENTO_id int PRIMARY KEY,
    FK_TIPO_CARTAO_id int
);

CREATE TABLE PAYPAL (
    conta varchar(50),
    FK_FORMA_PAGAMENTO_id int PRIMARY KEY
);

CREATE TABLE FORMA_PAGAMENTO (
    id int PRIMARY KEY
);

CREATE TABLE TIPO_CARTAO (
    id int PRIMARY KEY,
    descricao varchar(7)
);

CREATE TABLE FUNCIONARIO_ESTACIONAMENTO (
    FK_FUNCIONARIO_FK_PESSOA_FISICA_FK_PESSOA_id int,
    FK_ESTACIONAMENTO_id int
);

CREATE TABLE VEICULO_MOTORISTA (
    FK_VEICULO_placa varchar(8),
    FK_MOTORISTA_FK_PESSOA_FISICA_FK_PESSOA_id int
);

CREATE TABLE VEICULO_RESERVA (
    FK_VEICULO_placa varchar(8),
    FK_RESERVA_reserva_id int
);
 
ALTER TABLE PESSOA_JURIDICA ADD CONSTRAINT FK_PESSOA_JURIDICA_1
    FOREIGN KEY (FK_PESSOA_id)
    REFERENCES PESSOA (id);
 
ALTER TABLE ENDERECO ADD CONSTRAINT FK_ENDERECO_1
    FOREIGN KEY (FK_BAIRRO_id)
    REFERENCES BAIRRO (id)
    ON DELETE CASCADE ON UPDATE CASCADE;
 
ALTER TABLE FUNCIONARIO ADD CONSTRAINT FK_FUNCIONARIO_1
    FOREIGN KEY (FK_PESSOA_FISICA_FK_PESSOA_id)
    REFERENCES PESSOA_FISICA (FK_PESSOA_id)
    ON DELETE CASCADE ON UPDATE CASCADE;
 
ALTER TABLE FUNCIONARIO ADD CONSTRAINT FK_FUNCIONARIO_2
    FOREIGN KEY (FK_PESSOA_JURIDICA_FK_PESSOA_id)
    REFERENCES PESSOA_JURIDICA (FK_PESSOA_id)
    ON DELETE CASCADE ON UPDATE CASCADE;
 
ALTER TABLE FUNCIONARIO ADD CONSTRAINT FK_FUNCIONARIO_3
    FOREIGN KEY (FK_CARGO_id)
    REFERENCES CARGO (id)
    ON DELETE CASCADE ON UPDATE CASCADE;
 
ALTER TABLE BAIRRO ADD CONSTRAINT FK_BAIRRO_1
    FOREIGN KEY (FK_CIDADE_id)
    REFERENCES CIDADE (id)
    ON DELETE RESTRICT ON UPDATE RESTRICT;
 
ALTER TABLE ESTACIONAMENTO ADD CONSTRAINT FK_ESTACIONAMENTO_1
    FOREIGN KEY (FK_PESSOA_JURIDICA_FK_PESSOA_id)
    REFERENCES PESSOA_JURIDICA (FK_PESSOA_id)
    ON DELETE CASCADE ON UPDATE CASCADE;
 
ALTER TABLE ESTACIONAMENTO ADD CONSTRAINT FK_ESTACIONAMENTO_2
    FOREIGN KEY (FK_ENDERECO_id)
    REFERENCES ENDERECO (id)
    ON DELETE CASCADE ON UPDATE CASCADE;
 
ALTER TABLE CIDADE ADD CONSTRAINT FK_CIDADE_1
    FOREIGN KEY (FK_ESTADO_id)
    REFERENCES ESTADO (id)
    ON DELETE RESTRICT ON UPDATE RESTRICT;
 
ALTER TABLE PESSOA_FISICA ADD CONSTRAINT FK_PESSOA_FISICA_1
    FOREIGN KEY (FK_PESSOA_id)
    REFERENCES PESSOA (id);
 
ALTER TABLE PAGAMENTO_ESTACIONAMENTO ADD CONSTRAINT FK_PAGAMENTO_ESTACIONAMENTO_1
    FOREIGN KEY (FK_MOTORISTA_FK_PESSOA_FISICA_FK_PESSOA_id)
    REFERENCES MOTORISTA (FK_PESSOA_FISICA_FK_PESSOA_id)
    ON DELETE CASCADE ON UPDATE CASCADE;
 
ALTER TABLE PAGAMENTO_ESTACIONAMENTO ADD CONSTRAINT FK_PAGAMENTO_ESTACIONAMENTO_2
    FOREIGN KEY (FK_VAGA_id)
    REFERENCES VAGA (id)
    ON DELETE CASCADE ON UPDATE CASCADE;
 
ALTER TABLE VAGA ADD CONSTRAINT FK_VAGA_1
    FOREIGN KEY (FK_ESTACIONAMENTO_id)
    REFERENCES ESTACIONAMENTO (id)
    ON DELETE CASCADE ON UPDATE CASCADE;
 
ALTER TABLE MOTORISTA ADD CONSTRAINT FK_MOTORISTA_1
    FOREIGN KEY (FK_PESSOA_FISICA_FK_PESSOA_id)
    REFERENCES PESSOA_FISICA (FK_PESSOA_id)
    ON DELETE CASCADE ON UPDATE CASCADE;
 
ALTER TABLE RESERVA ADD CONSTRAINT FK_RESERVA_1
    FOREIGN KEY (FK_VAGA_id)
    REFERENCES VAGA (id);
 
ALTER TABLE RESERVA ADD CONSTRAINT FK_RESERVA_2
    FOREIGN KEY (FK_MOTORISTA_FK_PESSOA_FISICA_FK_PESSOA_id)
    REFERENCES MOTORISTA (FK_PESSOA_FISICA_FK_PESSOA_id);
 
ALTER TABLE RECARGA ADD CONSTRAINT FK_RECARGA_1
    FOREIGN KEY (FK_MOTORISTA_FK_PESSOA_FISICA_FK_PESSOA_id)
    REFERENCES MOTORISTA (FK_PESSOA_FISICA_FK_PESSOA_id)
    ON DELETE CASCADE ON UPDATE CASCADE;
 
ALTER TABLE RECARGA ADD CONSTRAINT FK_RECARGA_2
    FOREIGN KEY (FK_FORMA_PAGAMENTO_id)
    REFERENCES FORMA_PAGAMENTO (id)
    ON DELETE CASCADE ON UPDATE CASCADE;
 
ALTER TABLE CARTAO ADD CONSTRAINT FK_CARTAO_1
    FOREIGN KEY (FK_FORMA_PAGAMENTO_id)
    REFERENCES FORMA_PAGAMENTO (id)
    ON DELETE CASCADE ON UPDATE CASCADE;
 
ALTER TABLE CARTAO ADD CONSTRAINT FK_CARTAO_2
    FOREIGN KEY (FK_TIPO_CARTAO_id)
    REFERENCES TIPO_CARTAO (id)
    ON DELETE CASCADE ON UPDATE CASCADE;
 
ALTER TABLE PAYPAL ADD CONSTRAINT FK_PAYPAL_1
    FOREIGN KEY (FK_FORMA_PAGAMENTO_id)
    REFERENCES FORMA_PAGAMENTO (id)
    ON DELETE CASCADE ON UPDATE CASCADE;
 
ALTER TABLE FUNCIONARIO_ESTACIONAMENTO ADD CONSTRAINT FK_FUNCIONARIO_ESTACIONAMENTO_0
    FOREIGN KEY (FK_FUNCIONARIO_FK_PESSOA_FISICA_FK_PESSOA_id)
    REFERENCES FUNCIONARIO (FK_PESSOA_FISICA_FK_PESSOA_id)
    ON DELETE RESTRICT ON UPDATE RESTRICT;
 
ALTER TABLE FUNCIONARIO_ESTACIONAMENTO ADD CONSTRAINT FK_FUNCIONARIO_ESTACIONAMENTO_1
    FOREIGN KEY (FK_ESTACIONAMENTO_id)
    REFERENCES ESTACIONAMENTO (id)
    ON DELETE RESTRICT ON UPDATE RESTRICT;
 
ALTER TABLE VEICULO_MOTORISTA ADD CONSTRAINT FK_VEICULO_MOTORISTA_0
    FOREIGN KEY (FK_VEICULO_placa)
    REFERENCES VEICULO (placa)
    ON DELETE RESTRICT ON UPDATE RESTRICT;
 
ALTER TABLE VEICULO_MOTORISTA ADD CONSTRAINT FK_VEICULO_MOTORISTA_1
    FOREIGN KEY (FK_MOTORISTA_FK_PESSOA_FISICA_FK_PESSOA_id)
    REFERENCES MOTORISTA (FK_PESSOA_FISICA_FK_PESSOA_id)
    ON DELETE RESTRICT ON UPDATE RESTRICT;
 
ALTER TABLE VEICULO_RESERVA ADD CONSTRAINT FK_VEICULO_RESERVA_0
    FOREIGN KEY (FK_VEICULO_placa)
    REFERENCES VEICULO (placa)
    ON DELETE SET NULL ON UPDATE CASCADE;
 
ALTER TABLE VEICULO_RESERVA ADD CONSTRAINT FK_VEICULO_RESERVA_1
    FOREIGN KEY (FK_RESERVA_reserva_id)
    REFERENCES RESERVA (id)
    ON DELETE SET NULL ON UPDATE CASCADE;